# Blob Color Detection

Công cụ phát hiện những vật bất thường xuất hiện trong vùng kiểm tra dựa trên sự khác biệt về màu sắc.

**Ứng dụng phổ biến:**
- :white_check_mark: Phát hiện lỗi xuất hiện như vết bẩn.

[Tham khảo công cụ Blob detection](/docs/modules/blob_detection) 

## Video hướng dẫn
<VideoPlayer url='/videos/blob_detection/blob_detection.mp4' youtubeUrl='https://www.youtube.com/watch?v=impziQDivRE' />
Các công cụ hỗ trợ được sử dụng trong video:
-   [Nguồn ảnh - Imagesource](/docs/modules/Imagesource)

## Cài đặt

Tìm hiểu về biểu đồ [Histogram](/docs/modules/measure_color#biểu-đồ-histogram)
### Lựa chọn kiểu hình ảnh
Có thể chuyển ảnh sang hệ không gian màu khác như: HSV, HLS để thuận tiện hơn cho việc cài đặt giới hạn đo màu sắc. Không gian màu BGR phù 
hợp cho mắt người nhìn nhưng không thuận tiên cho việc cài đặt dải số học, hai kênh màu HSV và HLS phù hợp cài đặt theo dải đo hơn.
<Image width='480' src="/images/measure_color/2.PNG" />

:::tip
Thường chọn không gian màu HLS là tốt nhất.
:::

### Thông số
-   **Phương án phát hiện blob**:
    -   **Object**: bắt theo sự khác biệt độ sáng giữa đối tượng và nền.
    -   **Subtract Background**: tách nền và những đối tượng không thuộc nền được coi là vật cần bắt.
-   **Dải màu**: dải cường độ có giá trị trong khoảng từ [0, 255], dải cường độ gồm 3 channel tương ứng với **Kiểu hình ảnh** được lựa chọn. khi chọn phương án là **Object** thì những pixel có độ sáng trong cài đặt sẽ được coi là vật, 
nếu phương án chọn **Subtract Background** thì những pixel nằm trong cài đặt được coi là nền và những pixel ngoài cài đặt được coi là vật.

-   **Lọc đối tượng**:
    -   **Lọc kích thước tối thiểu**: diện tích vật bắt được cần lớn hơn kích thước tối thiểu này.
    -   **Lọc kích thước tối đa**: diện tích vật bắt được cần nhỏ hơn kích thước tối đa này.
-   **Sắp xếp**: sắp xếp đối tượng theo vị trí hoặc diện tích.
    -   **Scan order**: sắp xếp theo thứ tự bắt được.
    -   **Center X**: sắp xếp theo tọa độ tâm X.
    -   **Center Y**: sắp xếp theo tọa độ tâm Y.
    -   **Area**: sắp xếp theo diện tích.
-   **Kiểu sắp xếp**:
    -   **Ascending**: sắp xếp theo thứ tự tăng dần, sử dụng với các lựa chọn `Center X, Center Y, Area`.
    -   **Descending**: sắp xếp theo thứ tự giảm dần, sử dụng với các lựa chọn `Center X, Center Y, Area`.

## Kết quả
Trả về danh sách các blob bắt được gồm tọa độ tâm và diện tích từng blob.

-   **Center X**: tâm tọa độ của blob theo phương X.
-   **Center Y**: tâm tọa độ của blob theo phương Y.
-   **Area**: diện tích của blob.

## Cài đặt giới hạn

-   **Số lượng tối thiểu**: số lượng tối thiểu của blob.
-   **Số lượng tối đa**: số lượng tối đa của blob.
-   **Tổng diện tích tối thiểu**: tổng diện tích tối thiểu của tất cả blob.
-   **Tổng diện tích tối thiểu**: tổng diện tích tối đa của tất cả blob.