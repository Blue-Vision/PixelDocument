# Find Circle

Tìm kiếm hình tròn trong vùng tìm kiếm.

**Ứng dụng phổ biến:**
- :white_check_mark: Ứng dụng cho bài toán đo đạc kích thước, khoảng cách hình tròn.
- :white_check_mark: Hỗ trợ cho những bài toán cần định như định vị theo tâm đường tròn.

## Video hướng dẫn
<VideoPlayer url='/videos/find_circle/find_circle.mp4' youtubeUrl='https://www.youtube.com/watch?v=gV4Y7qiOusA' />
Các công cụ hỗ trợ được sử dụng trong video:
-   [Nguồn ảnh - Imagesource](/docs/modules/Imagesource)
-   [Định vị - Shape Matching](/docs/modules/Shape_Matching)

## Ý tưởng
Công cụ này tìm kiếm các điểm cạnh trên sản phẩm, sau đó nhóm các điểm cạnh có thể xấp xỉ theo một đường tròn để xác định đường tròn đại diện. Trong hình minh họa:

-   Các mũi tên màu cam biểu thị hướng tìm kiếm điểm cạnh.
-   Các dấu cộng màu xanh là các điểm cạnh được phát hiện.
-   Đường tròn màu đỏ là kết quả xấp xỉ từ các điểm cạnh, chính là đường tròn cần tìm.

<Image src="/images/find_circle/1.PNG" height='400' />

## Thông số cài đặt
### Hướng tìm kiếm
Hướng tìm kiếm hỗ trợ 2 phương hướng:
<Image src="/images/find_circle/2.PNG" />
- **Inside to outside**: tìm đường tròn hướng từ trong ra ngoài. Đường tròn đầu tiên thỏa mãn điều kiện tính từ trong ra sẽ được lựa chọn.
- **Outside to inside**: tìm đường tròn hướng từ ngoài vào trong. Đường tròn đầu tiên thỏa mãn điều kiện tính từ ngoài vào được lựa chọn.

### Phân cực cạnh

Chế độ tìm kiếm theo phân cực giúp lọc bỏ đi những trường hợp cạnh không mong muốn như chỉ mong muốn cạnh thuộc vùng sáng tới vùng tối hoặc ngược lại.
- **Dark to bright only**: chế độ tìm kiếm chỉ chọn những cạnh có sự thay đổi từ hướng tối sang sáng.
- **Bright to dark only**: chế độ tìm kiếm chỉ chọn những cạnh có sự thay đổi từ hướng sáng sang tối.
- **All edges**: tìm kiếm cả 2 hướng từ sáng sang tối và ngược lại.

<Image src="/images/find_circle/3.PNG" />
Ảnh phía bên trái chọn chế độ tìm kiếm **Bright to dark only**: đường tròn tìm thấy sẽ có phía bên trong là vùng sáng và phía bên ngoài là vùng tối.
Ảnh phía bên phải tìm kiếm theo **Dark to bright only**: kết quả sẽ tìm thấy đường tròn có phía bên trong là vùng tối và bên ngoài là vùng sáng. 
Hướng tìm kiếm theo hình mũi tên.

### Tìm kiếm
- **First edge**: tìm kiếm cạnh đầu tiên.
- **Best edge**: tìm kiếm cạnh có sự khác biệt lớn nhất.
<Image src="/images/find_circle/4.PNG" />

### Nâng cao
- **Khoảng trống (Gap)**: khoảng cách giữa các đường mũi tên tìm kiếm. Khoảng cách càng nhỏ số điểm cạnh tìm kiếm càng nhiều, số điểm hình thành đường tròn càng nhiều nhưng thời gian tính toán sẽ lâu hơn. 

### Chênh lệch cạnh tối thiểu
Chênh lệch cạnh được hiểu là sự chênh lệch cường độ giá trị giữa 2 điểm pixel, khi độ chênh lệch này cao hơn giá trị do người dùng đặt thì điểm pixel sẽ được coi là 1 điểm của cạnh.
Giá trị này càng cao thì điểm cạnh này càng có độ tin cậy cao.

## Kết quả
Thông số của đoạn thẳng tìm thấy:
-   **Center X position**: tọa độ tâm đường tròn theo trục X.
-   **Center Y position**: tọa độ tâm đường tròn theo trục Y.
-   **Radius**: bán kính đường tròn.
-   **Diameter**: đường kính đường tròn.

## Cài đặt giới thạn
Các giới hạn cài đặt dựa trên thông số đo:
-   **Bán kính tối thiểu**: cài đặt giới hạn tối thiểu cho giá trị **Radius**.
-   **Bán kính tối đa**: cài đặt giới hạn tối đa cho giá trị **Radius**.